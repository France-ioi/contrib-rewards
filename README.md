## Technologies

- Next.js (React)
- Prisma + MySQL
- Tailwind CSS

## Getting Started

First, install the dependencies:

```
yarn
```

Next, copy `.env` to an `.env.local` file and edit this local file
with your environment values.

Use this command to generate the secrets and copy them along to the `.env.local` file:

```
yarn generate-secrets
```

Additionally, `OAUTH_SECRET_ID` will be given by a Login Module admin,
it is the "Secret" field in the OAuth client page (cf below).
And `NEXT_PUBLIC_TEZOS_SMART_CONTRACT_ADDRESS` is the address of the
Tezos smart contract (cf below).

Finally, run the development server:

```
yarn dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.


## Login Module configuration

Here are the fields to specify in the login module configuration for this client:

```
redirect: http://localhost:3000/api/auth/callback/france-ioi
user_attributes: ["login","primary_email","first_name","last_name"]
verifiable_attributes: ["primary_email"]
recommended_attributes: ["picture"]
```

Don't forget to add in `oauth_client_verification_method` the verification
method corresponding to the `email_code` (cf table `verification_methods`).

## Tezos smart contract deployment

The smart contract to deploy is in the file `contract.py`.

Don't forget to change the public key `publicKey` by the value
generated by running `yarn generate-secrets`. The corresponding
secret key should be added to your `.env.local` file.